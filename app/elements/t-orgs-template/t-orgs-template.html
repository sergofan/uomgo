<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="t-orgs-template">
	<template>
		<style is="custom-style" include="shared-styles">
			:host {
				display: block;
				word-wrap: break-word;
				/*word-break: break-all;*/
			}
			paper-card {
				width: 100%;
				border-radius: 8px;
				--paper-card-header-text: {
					text-align: center;
				};
				--paper-card-content: {
				};
			}
			iron-accordion {
				/*padding: 8px 0;*/
				background-color: var(--paper-blue-grey-50);
			}
			.paper-font-headline {
				padding: 8px;
			}
			.accordionContent {
				background-color: white;
			}
			grid-element {
				/*margin: 16px;*/
			}
			grid-col {
				/*@apply(--layout-justified);*/
				text-align: center;
			}
			.red {
				color: red;
			}
		</style>

		<firebase-document id="firebaseDocument"
											 app-name="uomgo"
											 path="/orgs"
											 data="{{docData}}"></firebase-document>

		<paper-card heading="Образовательные организации"
								image=""
								elevation="4"
								animated-shadow="false">

			<div class="card-content">

				<div class="content">

					<iron-accordions>
						<iron-accordion>
							<div header class="paper-font-headline">
								Дошкольные образовательные организации
							</div>
							<div class="accordionContent shadow">

								<firebase-query id="firebaseQuery"
																path="/orgs/preschool/table"
																app-name="uomgo"
																data="{{dataPreschool}}"></firebase-query>

								<template is="dom-repeat"
													items="[[dataPreschool]]"
													as="val"
													target-framerate="60">

									<grid-element ga="16" class="content green-gradient">
										<grid-col>
											<p class="red">
												<b>Наименование по Уставу:</b>
											</p>
											<template is="juicy-html"
																content$="[[val.name]]"></template>
										</grid-col>
										<grid-col>
											<p class="red">
												<b>Юридический и фактический адрес, телефон, e-mail:</b>
											</p>
											<template is="juicy-html"
																content$="[[val.address]]"></template>
										</grid-col>
										<grid-col>
											<p class="red">
												<b>ФИО руководителя:</b>
											</p>
											<template is="juicy-html"
																content$="[[val.chief]]"></template>
										</grid-col>
									</grid-element>
								</template>
							</div>
						</iron-accordion>
						<iron-accordion>
							<div header class="paper-font-headline">
								Общеобразовательные организации
							</div>
							<div class="accordionContent shadow">

								<firebase-query id="firebaseQuery"
																path="/orgs/overal/table"
																app-name="uomgo"
																data="{{dataOveral}}"></firebase-query>

								<template is="dom-repeat"
													items="[[dataOveral]]"
													as="val"
													target-framerate="60">

									<grid-element ga="16" class="content green-gradient">
										<grid-col>
											<p class="red"><b>Наименование по Уставу:</b></p>
											<template is="juicy-html"
																content$="[[val.name]]"></template>
										</grid-col>
										<grid-col>
											<p class="red"><b>Юридический и фактический адрес, телефон, e-mail:</b></p>
											<template is="juicy-html"
																content$="[[val.address]]"></template>
										</grid-col>
										<grid-col>
											<p class="red"><b>ФИО руководителя:</b></p>
											<template is="juicy-html"
																content$="[[val.chief]]"></template>
										</grid-col>
									</grid-element>
								</template>
							</div>
						</iron-accordion>
						<iron-accordion>
							<div header class="paper-font-headline">
								Специальные (коррекционные) школы
							</div>
							<div class="accordionContent shadow">

								<firebase-query id="firebaseQuery"
																path="/orgs/special/table"
																app-name="uomgo"
																data="{{dataSpecial}}"></firebase-query>

								<template is="dom-repeat"
													items="[[dataSpecial]]"
													as="val"
													target-framerate="60">

									<grid-element ga="16" class="content green-gradient">
										<grid-col>
											<p class="red"><b>Наименование по Уставу:</b></p>
											<template is="juicy-html"
																content$="[[val.name]]"></template>
										</grid-col>
										<grid-col>
											<p class="red"><b>Юридический и фактический адрес, телефон, e-mail:</b></p>
											<template is="juicy-html"
																content$="[[val.address]]"></template>
										</grid-col>
										<grid-col>
											<p class="red"><b>ФИО руководителя:</b></p>
											<template is="juicy-html"
																content$="[[val.chief]]"></template>
										</grid-col>
									</grid-element>
								</template>
							</div>
						</iron-accordion>
						<iron-accordion>
							<div header class="paper-font-headline">
								Организации дополнительного образования
							</div>
							<div class="accordionContent shadow">

								<firebase-query id="firebaseQuery"
																path="/orgs/additional/table"
																app-name="uomgo"
																data="{{dataAdditional}}"></firebase-query>

								<template is="dom-repeat"
													items="[[dataAdditional]]"
													as="val"
													target-framerate="60">

									<grid-element ga="16" class="content green-gradient">
										<grid-col>
											<p class="red"><b>Наименование по Уставу:</b></p>
											<template is="juicy-html"
																content$="[[val.name]]"></template>
										</grid-col>
										<grid-col>
											<p class="red"><b>Юридический и фактический адрес, телефон, e-mail:</b></p>
											<template is="juicy-html"
																content$="[[val.address]]"></template>
										</grid-col>
										<grid-col>
											<p class="red"><b>ФИО руководителя:</b></p>
											<template is="juicy-html"
																content$="[[val.chief]]"></template>
										</grid-col>
									</grid-element>
								</template>
							</div>
						</iron-accordion>
						<iron-accordion>
							<div header class="paper-font-headline">
								Сведения о доходах руководителей ОО
							</div>
							<div class="accordionContent shadow">
								<template is="juicy-html"
													content$="[[docData.income.text]]"></template>
							</div>
						</iron-accordion>
					<iron-accordions>

				</div>
			</div>
		</paper-card>

	</template>
	<script>
	(function() {
		'use strict';

		Polymer({
			is: 't-orgs-template',
			properties: {
			},
			ready: function() {
				var ironAccordions = this.querySelector('iron-accordions');
				ironAccordions.addEventListener('transitionend', function() {
					var headerPanelMain = app.$.headerPanelMain;
					var scrollTop = headerPanelMain.scroller.scrollTop;
					var top = this._selection.selection[0].getBoundingClientRect().top;
					if ( this._selection.selection[0].opened ) {
						if ( top > 0 ) {
							headerPanelMain.scroll(top + scrollTop, true);
						} else if ( top < 0 ) {
							headerPanelMain.scroll( top + scrollTop - 64, true);
						};
					};
				});
			},
			_returnData: function(path) {
				// console.log(path);
				// this.set(this.$.firebaseQuery.path, this.zeroValue);
				// this.set(this.$.firebaseQuery.path, path);
				// console.log(this.path);
				// return this.$.firebaseQuery.data;
			}
		});
	})();
	</script>
</dom-module>
