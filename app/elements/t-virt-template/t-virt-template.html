<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="t-virt-template">
	<template>
		<style is="custom-style" include="shared-styles">
			:host {
				display: block;
				word-wrap: break-word;
				/*word-break: break-all;*/
			}
			paper-card {
				width: 100%;
				border-radius: 8px;
				--paper-card-header-text: {
					text-align: center;
				};
				--paper-card-content: {
				};
				--paper-card-header-image: {
					max-width: 100px;
				}
			}
		</style>

		<animated-lazy-pages attr-for-selected="data-route"
                         selected="{{appRouteSubdata.page}}"
                         animate-initial-selection
                         loading="{{loading}}">

			<template is="animated-lazy-page" data-route="rules">
        <neon-animatable entry-animation="fade-in-animation"
                         exit-animation="fade-out-animation"
                         animation-target>

          <x-virt-rules></x-virt-rules>

        <neon-animatable>
      </template>

			<template is="animated-lazy-page" data-route="messages">
        <neon-animatable entry-animation="fade-in-animation"
                         exit-animation="fade-out-animation"
                         animation-target>

          <x-virt-messages user="[[user]]"></x-virt-messages>

        <neon-animatable>
      </template>

		</animated-lazy-pages>

		<template  is="dom-if" if="[[loading]]">
      <div class="layout horizontal center-center">
        <paper-spinner-lite active="[[loading]]"
                            alt="Загрузка ..."></paper-spinner-lite>
      </div>
    </template>

	</template>
	<script>
	(function() {
		'use strict';

		Polymer({
			is: 't-virt-template',
			properties: {
				user: {
					type: Array
				},
				route: {
					type: Object,
					notify: true
				},
				appRouteData: {
					type: Object,
					notify: true
				},
				appRouteSubdata: {
					type: Object,
					notify: true
				}
			},
			ready: function() {
				// this.async(function() {
				// 	this.set('appRouteSubdata.page', 'rules');
				// 	this.set('route.path', '/virt/rules');
				// 	// if (this.user) {
				// 	// 	this.set('route.path', '/virt/messages');
				// 	// } else {
				// 	// 	this.set('route.path', '/virt/rules');
				// 	// }
				// });
			}
		});
	})();
	</script>
</dom-module>
